<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title> Ú¤Ù„Ù‡</title>
<link rel="icon" type="image/png" href="/image/logo2.png">
<link rel="stylesheet" href="../styles.css" />
<script src="../ether.js" defer></script>
<style>
  body{
    margin:0;
    color:#fff;
    font-family:"Cairo", sans-serif;
  }

  .page-area{ padding:22px; max-width:1200px; margin:auto; }

  .section-title{
    font-size:1.4rem; font-weight:900; margin:18px 0 10px;
  }

  .game-card{
    background: rgba(0,0,0,0.50);
    border-radius:16px;
    border:1px solid rgba(255,255,255,0.12);
    padding:0;
    cursor:pointer;
    transition:0.25s;
    text-align:center;
    position:relative;
    overflow:hidden;
  }
  .game-card:hover{
    transform:scale(1.04);
    backdrop-filter: blur(6px);
    transform:scale(1.04); }

  .game-thumb{
    width:100%;
    height:170px;
    object-fit:cover;
    background:#222;
    transition:0.25s;
  }

  .game-info{ flex:1; }
  .game-info h3{ margin:0 0 6px; font-size:1.1rem; }
  .game-info p{ margin:0; opacity:.85; font-size:.9rem; }
#gamesList {
  display: grid;
  grid-template-columns: repeat(4, 1fr); /* 3 Ø¨Ø·Ø§Ù‚Ø§Øª Ø¨Ø§Ù„Ø³Ø·Ø± */
  grid-template-rows: repeat(4, auto);   /* 4 ØµÙÙˆÙ */
  gap: 18px;
}
  .card-img-wrapper{
    position:relative;
    width:100%;
    height:170px;
    overflow:hidden;
  }
  .hover-desc{
    position:absolute;
    inset:0;
    background:rgba(0,0,0,0.65);
    display:flex;
    align-items:center;
    justify-content:center;
    text-align:center;
    padding:12px;
    opacity:0;
    transition:0.25s;
    font-size:.9rem;
  }
  .card-img-wrapper:hover .hover-desc{ opacity:1; }
.hover-full{
    position:absolute;
    inset:0;
    background:rgba(0,0,0,0.78);
    color:#fff;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:20px;
    text-align:center;
    opacity:0;
    transition:0.25s;
    font-size:.95rem;
    z-index:10;
    backdrop-filter: blur(4px);
    position:absolute;
    inset:0;
    background:rgba(0,0,0,0.78);
    color:#fff;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:20px;
    text-align:center;
    opacity:0;
    transition:0.25s;
    font-size:.95rem;
    z-index:10;
  }
  .game-card:hover .hover-full{ opacity:1; }

  /* grid for all sections */
  #lastPlayed, #newestGame, #mostPlayed{
    display:inline-block;
    width:32%;
    vertical-align:top;
    margin-bottom:20px;
  }

  /* Special badge styles */
  .badge-new{
    position:absolute;top:8px;right:8px;
    background:#ff3b3b;
    padding:4px 8px;
    border-radius:8px;
    font-size:.75rem;font-weight:900;
    z-index:20;
  }
  .badge-hot{
    position:absolute;top:8px;right:8px;
    background:#ff8c22;
    padding:4px 8px;
    border-radius:8px;
    font-size:.75rem;font-weight:900;
    z-index:20;
  }
.stats-row{
    display:flex;
    gap:18px;
    margin-bottom:25px;
  }
  .stats-col{
    flex:1;
    min-width:0;
  }
</style>
</head>

<body>

<canvas id="ether-bg" aria-hidden="true"></canvas>

<div class="top-bar">
  <div class="back-btn" onclick="window.location.href='../index.html'">Ø±Ø¬ÙˆØ¹</div>

  <!-- âœ… ØµÙ†Ø¯ÙˆÙ‚ Ø­Ø³Ø§Ø¨ ØªÙˆÙŠØªØ´ -->
  <div class="twitch-user-box" id="twitchUserBox">
    <img id="twitchAvatar" src="">
    <span id="twitchUsername">ØºÙŠØ± Ù…Ø³Ø¬Ù‘Ù„</span>
  </div>

  <h2 class="site-title">Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨</h2>
</div>

<div class="page-area">

  <div class="stats-row">
  <div class="stats-col">
    <div class="section-title">ğŸ“‚ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨</div>
  <div id="gamesList"></div>

</div>

<script>
/* =============== Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ (Ù…Ù† Ø¯Ø§Ø®Ù„ Ø§Ù„ØµÙØ­Ø©) =============== */
const games = [
  {
    title:"Ø¹Ø¬Ù„Ø© Ú¤Ù€Ù„Ù‡",
    desc:"Ø¹Ø¬Ù„Ø© Ø´Ø®ØµÙ†Ø© ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠØ© ØŒ Ù…Ø¹ ÙƒÙ„ Ù„ÙØ© Ù…Ù† Ø§Ù„Ø¹Ø¬Ù„Ø© ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø§Ø³Ù… Ø´Ø®Øµ Ø¹Ø´ÙˆØ§Ø¦ÙŠ Ù…Ù† Ø§Ø¬Ù„ Ø§Ù† ÙŠØ·Ø±Ø¯ Ø´Ø®Øµ Ø§Ø®Ø± Ù…Ù† Ø§Ù„Ø¹Ø¬Ù„Ø© ØŒ Ø§Ø®Ø± Ù…Ù† ÙŠØ¨Ù‚Ù‰ ÙŠÙÙˆØ²",
    thumb:"image/logo2.png",
    url:"games/wheels/index.html",
    added:20250128
  },
  {
    title:"Ø§Ù„Ø³Ø±Ø¹Ø© Ø¨Ø¯ÙˆÙ† Ø¨Ø¯ÙŠÙ‡Ø©",
    desc:"Ù„Ø¹Ø¨Ø© ÙŠØ­ØªØ§Ø¬ Ø§Ù„Ø³Ø±Ø¹Ø© Ùˆ Ø§Ù„ØªØ±ÙƒÙŠØ² ØŒ ØªØ¬ÙŠÙƒ Ù…Ø·Ø± Ù…Ù† Ø§ÙŠÙ…ÙˆØ¬ÙŠØ§Øª Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© Ù„Ø§Ø²Ù… ØªØ¹Ø¯ Ø¹Ø¯Ø¯ Ø§Ù„Ø§ÙŠÙ…ÙˆØ¬ÙŠØ§Øª Ùˆ ØªØ¹Ø±Ù Ø¹Ø¯Ø¯ Ø§Ù„Ø§ÙŠÙ…ÙˆØ¬ÙŠ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨",
    thumb:"image/logo.png",
    url:"games/rain/index.html",
    added:20250129
  },
  {
    title:"Ø·Ø§ÙˆÙ„Ø© Ø§Ù„ØµÙ…Ù„Ø©",
    desc:"Ø§Ù„Ù„Ø¹Ø¨Ø© Ù…Ø²ÙŠØ¬ Ø¨ÙŠÙ† Ø¹Ø¬Ù„Ø© Ø§Ù„Ø´Ø®ØµÙ†Ø© Ùˆ Ø±ÙˆÙ„ÙŠØª Ø§Ù„Ø±ÙˆØ³ÙŠ ØŒ Ø§Ù„Ø¨Ù‚Ø§Ø¡ Ù„ØµØ§Ø­Ø¨ Ø§ÙØ¶Ù„ Ø§Ù„Ø­Ø¸",
    thumb:"image/logo2.png",
    url:"games/roulette/index.html",
    added:20250120
  },
  {
    title:"Ø­Ø±Ø¨ Ø§Ù„Ø¯ÙˆÙ„",
    desc:"Ø¹Ø¬Ù„Ø© Ø§Ù„Ø­Ø¸ ÙˆÙ„ÙƒÙ† Ø§Ù„Ø·Ø±Ø¯ ØªÙƒÙˆÙ† Ø¹Ø´ÙˆØ§Ø¦ÙŠ Ù„Ø§Ù† ÙƒÙ„ Ù„Ø§Ø¹Ø¨ Ù…Ø®ØªÙÙŠ Ø®Ù„Ù Ø¯ÙˆÙ„Ø© Ù…Ø¹ÙŠÙ†Ø©",
    thumb:"image/logo.png",
    url:"games/country/index.html",
    added:20250121
  },
  {
    title:"Ø§Ù„ÙØ³Ø­Ø©",
    desc:"Ø§Ù„ÙØ³Ø­Ø© Ù…ÙƒØ§Ù† Ø§Ù„Ù‡ÙˆØ§Ø´Ø§Øª ÙˆØ§Ù„Ø­ÙŠÙ† ÙˆÙ‚Øª ØªØ­Ø²Ø¨ Ø§Ù„Ø´Ø¹Ø¨ ÙƒÙ„ ÙˆØ§Ø­Ø¯ ÙŠØ®ØªØ§Ø± Ø´Ø¹Ø¨ØªÙ‡ Ùˆ ÙŠØ¯Ø®Ù„ Ø¨Ø­Ø±Ø¨ Ø¶Ø¯ Ø´Ø¹Ø¨Ø© Ø§Ù„Ù…Ù†Ø§ÙØ³Ø©",
    thumb:"image/logo2.png",
    url:"games/war/index.html",
    added:20250122
  }
];

/* =============== Ø¨Ù†Ø§Ø¡ Ø¹Ù†ØµØ± Ø§Ù„Ù„Ø¹Ø¨Ø© =============== */
function gameCard(g){
  const div = document.createElement("div");
  div.className = "game-card";
  div.onclick = ()=>{
    localStorage.setItem("lastPlayed", g.title);
    const c = Number(localStorage.getItem("playCount_"+g.title) || 0);
    localStorage.setItem("playCount_"+g.title, c+1);
    window.location.href = g.url;
  };
  div.innerHTML = `
    <img class=\"game-thumb\" src=\"${g.thumb}\" onerror=\"this.src='fallback.jpg'\">
    <div class='hover-full'>${g.desc}</div>
    <h3 style='margin:10px 0 6px;font-size:1.1rem;position:relative;z-index:5;'>${g.title}</h3>
  `;
  return div;
}

/* =============== Ø¹Ø±Ø¶ ÙƒÙ„ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ =============== */
function renderAllGames(){
  const box = document.getElementById("gamesList");
  box.innerHTML = "";
  games.forEach(g=> box.appendChild(gameCard(g)));
}

/* =============== Ø¢Ø®Ø± Ù„Ø¹Ø¨Ø© Ù„Ø¹Ø¨ØªÙ‡Ø§ =============== */
function renderLastPlayed(){
  const last = localStorage.getItem("lastPlayed");
  const box = document.getElementById("lastPlayed");
  box.innerHTML = last ? "" : `<div class='muted'>Ù…Ø§ Ù„Ø¹Ø¨Øª Ø£ÙŠ Ù„Ø¹Ø¨Ø© Ø¨Ø¹Ø¯</div>`;
  if(!last) return;
  const g = games.find(x=>x.title===last);
  if(g) box.appendChild(gameCard(g));
}

/* =============== Ø£Ø­Ø¯Ø« Ù„Ø¹Ø¨Ø© =============== */
function renderNewest(){
  const box = document.getElementById("newestGame");
  const g = [...games].sort((a,b)=>b.added - a.added)[0];
  box.appendChild(gameCard(g));
}

/* =============== Ø£ÙƒØ«Ø± Ù„Ø¹Ø¨Ø© Ù„Ø¹Ø¨ØªÙ‡Ø§ =============== */
function renderMostPlayed(){
  let max = 0;
  let best = null;
  games.forEach(g=>{
    const c = Number(localStorage.getItem("playCount_"+g.title) || 0);
    if(c > max){ max = c; best = g; }
  });

  const box = document.getElementById("mostPlayed");
  if(!best || max===0){
    box.innerHTML = `<div class='muted'>Ù…Ø§ Ù„Ø¹Ø¨Øª ÙƒÙØ§ÙŠØ© Ù„Ù†Ø¹Ø±Ø¶ Ù„Ùƒ Ø¥Ø­ØµØ§Ø¡Ø§Øª</div>`;
    return;
  }
  box.appendChild(gameCard(best));
}

/* =============== ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙØ­Ø© =============== */
renderAllGames();
 
 
 

</script>
<script>
const BOT_USERNAME = "vallabot";
const BOT_TOKEN = "yhhyqlfr878a0r2zve9lcensv4v13c";
const CHANNEL = localStorage.getItem("twitch_username");
const TWITCH_CLIENT_ID = "t0u3q65s187lx1y839yudlutyvkurc"; // âœ… Ø­Ø· Client ID Ù‡Ù†Ø§
const twitchToken = localStorage.getItem("twitch_access_token");
const twitchUser  = localStorage.getItem("twitch_username");

const userName   = document.getElementById("twitchUsername");
const userAvatar = document.getElementById("twitchAvatar");

document.addEventListener("DOMContentLoaded", async () => {

  const userName   = document.getElementById("twitchUsername");
  const userAvatar = document.getElementById("twitchAvatar");

  const twitchToken = localStorage.getItem("twitch_access_token");
  const twitchUser  = localStorage.getItem("twitch_username");

  const TWITCH_CLIENT_ID = "t0u3q65s187lx1y839yudlutyvkurc"; // ID Ø­Ù‚Ùƒ

  console.log("ğŸŸ£ User:", twitchUser);
  console.log("ğŸŸ£ Token:", twitchToken);

  if(!twitchToken || !twitchUser){
    userName.textContent = "ØºÙŠØ± Ù…Ø³Ø¬Ù‘Ù„";
    userAvatar.src = "https://placehold.co/32x32?text=?";
    return;
  }

  try{
    const res = await fetch(`https://api.twitch.tv/helix/users?login=${twitchUser}`, {
      headers:{
        "Client-ID": TWITCH_CLIENT_ID,
        "Authorization": `Bearer ${twitchToken}`
      }
    });

    const data = await res.json();
    console.log("âœ… Twitch Data:", data);

    if(data.data && data.data.length){
      userName.textContent = data.data[0].display_name;
      userAvatar.src = data.data[0].profile_image_url;
    }else{
      userName.textContent = twitchUser;
      userAvatar.src = "https://placehold.co/32x32?text=?";
    }

  }catch(err){
    console.error("âŒ Twitch Error:", err);
    userName.textContent = twitchUser;
    userAvatar.src = "https://placehold.co/32x32?text=?";
  }

});
</script>

</body>

</html>
